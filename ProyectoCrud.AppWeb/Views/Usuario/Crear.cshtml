
@{
    ViewData["Title"] = "Crear";
}

@model ProyectoCrud.DAL.Models.Usuario;


<div class="card">
    <div class="card-title">
        <h1>Crear</h1>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Id</label>
                    <input id="txtid" value="@Model.Id"  disabled="disabled" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Nombre</label>
                    <input id="txtnombre" value="@Model.Nombre"  class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Edad</label>
                    <input id="txtedad" value="@Model.Edad" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Email</label>
                    <input id="txtemail" value="@Model.Email" class="form-control" />
                </div>
            </div>
        </div>
         <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Salario</label>
                    <input id="txtsalario" value="@Model.Salario" class="form-control" />
                </div>
            </div>
        </div>
         <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Fecha</label>
                    <input id="txtfecha" value="@Model.Fecha" type="date" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group" style="margin-top:10px">
                   <a onclick="handlesave()" class="btn btn-success">Guardar</a> <a onclick="backtolist()" class="btn btn-danger">Cancelar</a>
                </div>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">

    function backtolist()
    {
        window.location.href = "/Usuario/Index";
    }
    function handlesave() {
        var Id = $('#txtid').val();
        var nombre = $('#txtnombre').val();
        var edad = $('#txtedad').val();
        var email = $('#txtemail').val();
        var salario = $('#txtsalario').val();
        var fecha = $('#txtfecha').val();

        var proceso = true;


        //validacion 
        if (nombre != '' && nombre != null) {
            $('#txtnombre').css('border-color', '#ccc');
        }else{
            $('#txtnombre').css('border-color', 'red');
            proceso=false;
        }
        if (salario != '' && salario != null) {
            $('#txtsalario').css('border-color', '#ccc');
        }else{
            $('#txtsalario').css('border-color', 'red');
            proceso = false;
        }
        if(proceso)
        {
            var _usuario = new Object();
            _usuario.Id=parseInt(Id);
            _usuario.Nombre = nombre;
            _usuario.Edad = parseInt(edad);
            _usuario.Email = email;
            _usuario.Salario = parseFloat(salario);
            _usuario.Fecha = fecha;

            $.ajax({
                type:"POST",
                url: "/usuario/Guardar",
                data: _usuario,
                success: function(data) {
                    if (data == 'pass') {
                        alert('Usuario Guardado.')
                        backtolist();
                    }else{
                        alert('el proceso fallo :' + data)
                    }
                },
                failure: function(err) {

                }
            });
        }
    }

</script>


